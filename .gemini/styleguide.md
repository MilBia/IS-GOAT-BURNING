# Style Guide for "Is the GÃ¤vle Goat Burning?"

As an AI assistant, you MUST adhere to the following principles and rules when contributing to this project.

## 1. Core Architectural Principles

1.  **Asynchronous First:** The entire application is built on `asyncio`. All new I/O-bound operations (networking, file access) MUST be non-blocking and use `async/await`.
2.  **Configuration via Environment:** All configuration is managed through environment variables.
    -   New settings MUST be added to `.env.example`.
    -   Settings are loaded *only* in `is_goat_burning/config.py`.
    -   Other modules MUST import settings from `is_goat_burning.config` and MUST NOT access `os.environ` directly.
3.  **Strict Modularity:** Respect the separation of concerns defined by the directory structure.
    -   `burning_goat_detection.py`: The central orchestrator. Do not add complex business logic here.
    -   `is_goat_burning/fire_detection/`: Core computer vision logic.
    -   `is_goat_burning/on_fire_actions/`: Notification services (Email, Discord, etc.).
    -   `is_goat_burning/stream_recording/`: Video saving and archiving logic.

## 2. Code Style and Quality

The project enforces a strict style using `ruff`, configured in `pyproject.toml`.

1.  **Formatting:**
    -   Adhere to PEP 8.
    -   Use **double quotes** (`"`) for all strings.
    -   Line length is 128 characters.
2.  **Type Hinting:**
    -   All function and method signatures **MUST** include type hints for all arguments and their return values.
    -   Use specific types (e.g., `list[str]`, not `list`).
3.  **Docstrings:**
    -   All public modules, classes, functions, and methods **MUST** have a docstring.
    -   Docstrings **MUST** follow the **Google Style** format.
4.  **No Magic Numbers:**
    -   Avoid unnamed, hardcoded numbers. Define them as `UPPER_SNAKE_CASE` constants at the module or class level.

## 3. Dependency Management

-   The single source of truth for dependencies is `pyproject.toml`.
-   **DO NOT** edit `requirements.txt`, `requirements-cpu.txt`, or `requirements-dev.txt` manually. They are generated by `pip-compile`. To add a dependency, modify `pyproject.toml` and run the compile commands specified in `README.md`.

## 4. Commit Messages

-   Commit messages **MUST** follow the **Conventional Commits** specification.
-   **Format:** `<type>(<scope>): <description>`
-   **Common Types:** `feat`, `fix`, `refactor`, `docs`, `test`, `chore`.
-   **Example:** `feat(notifications): add support for Slack webhooks`

## 5. Testing

-   The testing framework is `pytest`.
-   All tests reside in the `tests/` directory, mirroring the main project structure.
-   New features and significant bug fixes SHOULD be accompanied by tests.

## 6. Directory-Specific Rules

-   **`on_fire_actions/`**: Any new notification service MUST be implemented as a class in its own file. The class must have an `async def __call__(self)` method to execute the action. Configuration must be passed to `__init__`.
